{{ if eq .Type "generator" }}
<script src="{{ "js/pdfmake.min.js" | absURL }}"></script>
<script src="{{ "js/vfs_fonts.js" | absURL }}"></script>
<script src="{{ "js/generator.gen.js" | absURL }}"></script>
{{ end }}

{{ if eq .Type "company" }}
<script src="{{ "js/company-list.gen.js" | absURL }}"></script>
{{ end }}

{{ if .IsHome }}
<script src="{{ "js/algoliasearch.min.js" | absURL }}"></script>
<script src="{{ "js/autocomplete.min.js" | absURL }}"></script>
<script src="{{ "js/company-search.js" | absURL }}"></script>
<script>
algolia_autocomplete.on('autocomplete:selected', function(event, suggestion, dataset) {
    /* TODO: Prefill generator with company for this */
    location.href = '/generator?company=' + suggestion.slug;
});
</script>

<script>
    /* modified after https://codepen.io/danielgroen/pen/VeRPOq */
    var hero_rights = [ "Datenauskunft.", "Vergessenwerden.", "Datenberichtigung.", "Widerspruch.", "Datenschutz!"];
    /* TODO: Move create a proper repository of suggested companies and use that here. */
    var search_suggested_companies = [ "Schufa", "Amazon", "Creditreform Boniversum", "infoscore", "ARD ZDF Deutschlandradio Beitragsservice", "CRIF Bürgel", "PayPal" ];

    function typewriter(text, i, fnCallback) {
        if (i < (text.length)) {
            document.getElementById("home-hero-word").innerHTML = text.substring(0, i+1) +'<span aria-hidden="true"></span>';

            setTimeout(function() {
                typewriter(text, i + 1, fnCallback)
            }, 150);
        }
        else if (typeof fnCallback == 'function') {
            setTimeout(fnCallback, 700);
        }
    }
    function startTextAnimation(i) {
        if (typeof hero_rights[i] == 'undefined'){
            setTimeout(function() {
                startTextAnimation(0);
            }, 20000);
        }
        if (i < hero_rights[i].length) {
            typewriter(hero_rights[i], 0, function(){
                startTextAnimation(i + 1);
            });
        }
    }

    function changePlaceholderCompany() {
        document.getElementById("aa-search-input").placeholder = "Wie wäre es mit „" + search_suggested_companies[Math.floor(Math.random() * search_suggested_companies.length)] + "“?";
    }

    window.onload = function() {
        startTextAnimation(0);
        setInterval(changePlaceholderCompany, 2000);
    };
</script>
{{ end }}